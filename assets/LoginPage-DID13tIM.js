import{r as e,j as t,a0 as a,au as i,x as n,B as r,b as s,H as o,n as c}from"./vendor-D9hp7L7M.js";import{b as d,u as l}from"./main-nGlF3j8C.js";const m=({botName:a,onAuth:i,size:n="large",requestAccess:r="write"})=>(e.useEffect((()=>{let e=document.getElementById("telegram-login-container");e||(e=document.createElement("div"),e.id="telegram-login-container",document.body.appendChild(e)),window.TelegramLoginWidget={dataOnauth:e=>{i(e)}};const t=document.createElement("script");return t.src="https://telegram.org/js/telegram-widget.js?22",t.setAttribute("data-telegram-login",a),t.setAttribute("data-size",n),t.setAttribute("data-request-access",r),t.setAttribute("data-onauth","window.TelegramLoginWidget.dataOnauth(user)"),t.async=!0,e.appendChild(t),()=>{e&&e.contains(t)&&e.removeChild(t)}}),[a,i,n,r]),t.jsx("div",{id:"telegram-login-container"})),g=()=>{const{t:g}=d(),{authenticateWithTelegramWebApp:h,authenticateWithTelegramWidget:u,isAuthenticated:x,isLoading:j,error:p,telegramWebApp:b}=l(),f=a();e.useEffect((()=>{h().catch((()=>{}))}),[h]),e.useEffect((()=>{x&&f("/")}),[x,f]);return t.jsx(i,{maxWidth:"sm",sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs(n,{sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[t.jsx(r,{component:"img",src:"/teachair-logo.svg",alt:"Teachair",sx:{width:128,height:128,marginBottom:2}}),t.jsx(s,{sx:{marginBottom:4},children:g("auth.welcome")}),j&&t.jsxs(t.Fragment,{children:[t.jsx(o,{}),t.jsx(s,{variant:"body2",sx:{my:2},children:g("auth.authorization")})]}),!j&&!b&&t.jsx(t.Fragment,{children:t.jsx(c,{variant:"contained",color:"primary",onClick:()=>{window.location.reload()},children:g("common.actions.tryAgain")})}),!j&&b&&t.jsx(t.Fragment,{children:t.jsx(m,{botName:"teachair_bot",onAuth:e=>{u(e)},size:"large",requestAccess:"read"})})]})})};export{g as default};
