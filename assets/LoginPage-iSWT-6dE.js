import{a6 as t,r as e,j as a,au as s,K as i,b as n,x as r,B as o,n as c,$ as l}from"./vendor-VLBVWaDG.js";import{b as h,u as x,a as m,aQ as d,aR as u}from"./main-mWCWJs1P.js";import{T as g,G as j}from"./GoogleButton-BBMpEVb4.js";import"./index-LWfQEWTZ.js";const f=()=>{const{t:f}=h(),{authenticateWithTelegramWebApp:p,authenticateWithTelegramWidget:y,authenticateWithGoogleOAuth:b,isAuthenticated:v,isLoading:A,error:w,telegramWebApp:W}=x(),I=t(),{showToast:T,showErrorToast:E}=m(),[z,B]=e.useState(!1);e.useEffect((()=>{p().catch((()=>{}))}),[p]),e.useEffect((()=>{v&&I("/")}),[v,I]);return A?a.jsxs(s,{maxWidth:"sm",sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",textAlign:"center"},children:[a.jsx(i,{sx:{mb:2}}),a.jsx(n,{variant:"h6",children:f("auth.authorization")})]}):a.jsx(s,{maxWidth:"sm",sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs(r,{sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[a.jsx(o,{component:"img",src:"/teachair-logo.svg",alt:"Teachair",sx:{width:128,height:128,marginBottom:2}}),a.jsx(n,{sx:{marginBottom:4},children:f("auth.welcome")}),A&&a.jsxs(a.Fragment,{children:[a.jsx(i,{}),a.jsx(n,{variant:"body2",sx:{my:2},children:f("auth.authorization")})]}),!A&&!W&&a.jsx(a.Fragment,{children:a.jsx(c,{variant:"contained",color:"primary",onClick:()=>{window.location.reload()},children:f("common.actions.tryAgain")})}),!A&&W&&a.jsxs(o,{sx:{display:"flex",alignItems:"center",flexDirection:"column",gap:2},children:[a.jsx(g,{botName:"teachair_bot",onAuth:t=>{y(t)},size:"large",requestAccess:"read"}),a.jsx(c,{variant:"text",size:"small",onClick:()=>B(!z),endIcon:z?a.jsx(d,{}):a.jsx(u,{}),sx:{mt:1},children:f(z?"auth.hideAlternative":"auth.showAlternative")}),a.jsx(l,{in:z,timeout:"auto",unmountOnExit:!0,children:a.jsxs(o,{sx:{display:"flex",alignItems:"center",flexDirection:"column",gap:0,width:"100%"},children:[a.jsx(n,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:f("auth.telegramRecommendation")}),a.jsx(j,{onSuccess:t=>{b(t)},onError:t=>{E(t)}})]})})]})]})})};export{f as default};
