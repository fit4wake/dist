import{r as e,af as t,a7 as a,ad as r,j as o,aF as s,B as n,b as i,o as c,a0 as l}from"./vendor-EJ2UFF3P.js";import{u as d,b as m,c as x,L as h}from"./main-BnhaBm3Q.js";const g=({mode:g})=>{const[f,y]=e.useState(null),[p,u]=e.useState(!1),{shareKey:j,teacherUsername:b}=t(),v=a(),k=r(),{isAuthenticated:w,isLoading:B}=d(),{t:S}=m();e.useEffect((()=>{if(!B){if(!w){const e=k.pathname;return localStorage.setItem("redirectAfterLogin",e),void v("/login",{replace:!0})}j&&_(),b&&A()}}),[w,B,j,b,k.pathname,v]);const _=async()=>{if(j)try{const{work_id:e}=await x.works.getWorkIdByShareKey(j);v(`/works/${e}?return_to=/`,{replace:!0})}catch(e){y(e)}else v("/",{replace:!0})},A=async()=>{if(b)try{const{contract_id:e}=await x.contracts.join(b);v(`/contracts/?contract_id=${e}&return_to=/`,{replace:!0})}catch(e){y(e)}else v("/",{replace:!0})};return o.jsxs(s,{maxWidth:"sm",sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",textAlign:"center"},children:[o.jsx(h,{}),f?o.jsxs(n,{sx:{maxWidth:400,textAlign:"center"},children:[o.jsx(i,{variant:"body1",color:"text.primary",sx:{marginBottom:2},children:S("globalRedirect.error.title")}),o.jsx(c,{onClick:()=>u(!p),variant:"text",color:"primary",sx:{marginBottom:2},children:S("globalRedirect.actions.showDetails")}),o.jsx(l,{in:p,children:o.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem",marginBottom:2},children:f.message||S("globalRedirect.error.generic")})}),o.jsx(c,{onClick:()=>v("/"),variant:"contained",color:"primary",children:S("globalRedirect.actions.goHome")})]}):null]})};export{g as default};
