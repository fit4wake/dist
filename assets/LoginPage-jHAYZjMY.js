import{a5 as t,r as e,j as a,at as s,H as i,b as n,x as r,B as o,n as c}from"./vendor-5I4LDDhx.js";import{T as l,G as h}from"./GoogleButton-B0CfUkvJ.js";import{b as x,u as m,a as d}from"./main-CRu-gqtW.js";import"./index-DJpBFrpu.js";const g=()=>{const{t:g}=x(),{authenticateWithTelegramWebApp:u,authenticateWithTelegramWidget:j,authenticateWithGoogleOAuth:f,isAuthenticated:p,isLoading:y,error:b,telegramWebApp:A}=m(),W=t(),{showToast:v,showErrorToast:w}=d();e.useEffect((()=>{u().catch((()=>{}))}),[u]),e.useEffect((()=>{p&&W("/")}),[p,W]);return y?a.jsxs(s,{maxWidth:"sm",sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",textAlign:"center"},children:[a.jsx(i,{sx:{mb:2}}),a.jsx(n,{variant:"h6",children:g("auth.authorization")})]}):a.jsx(s,{maxWidth:"sm",sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs(r,{sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[a.jsx(o,{component:"img",src:"/teachair-logo.svg",alt:"Teachair",sx:{width:128,height:128,marginBottom:2}}),a.jsx(n,{sx:{marginBottom:4},children:g("auth.welcome")}),y&&a.jsxs(a.Fragment,{children:[a.jsx(i,{}),a.jsx(n,{variant:"body2",sx:{my:2},children:g("auth.authorization")})]}),!y&&!A&&a.jsx(a.Fragment,{children:a.jsx(c,{variant:"contained",color:"primary",onClick:()=>{window.location.reload()},children:g("common.actions.tryAgain")})}),!y&&A&&a.jsxs(o,{sx:{display:"flex",alignItems:"center",flexDirection:"column",gap:2},children:[a.jsx(l,{botName:"teachair_bot",onAuth:t=>{j(t)},size:"large",requestAccess:"read"}),a.jsx(n,{variant:"body2",sx:{mx:2,color:"text.secondary"},children:g("auth.or")}),a.jsx(h,{onSuccess:t=>{f(t)},onError:t=>{w(t)}})]})]})})};export{g as default};
