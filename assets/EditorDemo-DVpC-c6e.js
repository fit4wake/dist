import{r as e,K as s,O as a,j as t,B as o,ai as i,aj as n,b as l,aH as r,y as d,o as x}from"./vendor-VHbKv6Ho.js";import{H as c,a as h,b as m,L as p,J as u,b2 as f,b3 as j,N as v,Q as g,V as w,X as y,Y as b,Z as k,_ as D,a0 as S,a1 as C,a2 as I,a3 as z,a4 as R,a5 as N,a8 as T,a9 as A,aa as F,ab as V,ac as B,ad as H,ae as Q,af as W,ag as E,f as O,ai as _,aj as q,ak as G,al as J,am as K,ao as L,ap as M,aq as P,I as U,w as X,at as Y,bz as Z,bA as $}from"./main-d-KpagPl.js";import{P as ee,A as se}from"./teacher-BQT5oBs9.js";const ae=()=>{const{mode:ae}=c(),te=e.useRef(null),[oe,ie]=e.useState(!0),[ne,le]=e.useState(""),[re,de]=e.useState("live-preview"),{showErrorToast:xe}=h(),[ce,he]=e.useState(!1),{t:me}=m(),pe=s(),ue=a(pe.breakpoints.down("md"));e.useEffect((()=>{(async()=>{try{const e=await fetch("https://teachair.app/docs/editor-guide.md");le(await e.text()||"")}catch(e){}finally{ie(!1)}})()}),[]);function fe(e=!1){return t.jsxs(t.Fragment,{children:[t.jsx(_,{options:["Bold","Italic"]}),t.jsx(q,{options:["bullet","number"]}),t.jsx(se,{}),t.jsx(G,{}),t.jsx(J,{editorRef:te}),t.jsx(K,{editorRef:te}),t.jsx(q,{options:["check"]}),t.jsx(L,{editorRef:te}),t.jsx(M,{editorRef:te}),t.jsx(P,{editorRef:te}),t.jsxs(o,{sx:{display:"flex",flexDirection:"row",alignItems:"center",opacity:.5},children:[t.jsx(U,{sx:{ml:1},fontSize:"small"}),t.jsx(X,{sx:{mx:1},fontSize:"small"})]}),t.jsx(Y,{}),t.jsx(Z,{}),t.jsx($,{})]})}return oe?t.jsx(p,{}):t.jsxs(o,{sx:{height:"100%",display:"flex",flexDirection:"column",gap:1,justifyContent:"center",alignItems:"center"},children:[t.jsx(i,{position:"static",color:"default",elevation:0,children:t.jsxs(n,{children:[t.jsx(l,{variant:"h4",component:"div",sx:{flexGrow:1},children:t.jsxs(r,{href:"https://teachair.app/",sx:{textDecoration:"none"},children:[" ",t.jsx(u,{fontSize:"small",sx:{verticalAlign:"sub"}})," Teachair"]})}),t.jsxs(o,{sx:{display:"flex",gap:2},children:[t.jsx(f,{variant:"compact"}),t.jsx(j,{variant:"compact"})]})]})}),t.jsxs(o,{sx:{display:"flex",gap:1,height:"100%",width:"100%",overflow:"hidden",justifyContent:"center",alignItems:"center"},children:[t.jsxs(o,{sx:{display:"flex",flex:"3 1",flexDirection:"column",width:"100%",maxWidth:"800px",height:"100%",position:"relative",overflow:"hidden",p:1},children:[t.jsx(d,{sx:{flex:1,display:"flex",flexDirection:"column",minHeight:0,position:"relative",border:"1px solid",borderColor:"divider",overflow:"auto"},children:t.jsx(v,{ref:te,markdown:ne,autoFocus:!0,onChange:e=>{le(e)},className:"dark"===ae?"mdxeditor dark-theme dark-editor":"mdxeditor light-theme light-editor",translation:(e,s,a)=>me("editor."+e,{defaultValue:s,...a}),plugins:[g(),w(),y(),b({disableImageResize:!0,disableImageSettingsButton:!0}),k(),D(),S(),C(),I({viewMode:"rich-text"}),z({escapeUnknownTextDirectives:!0,directiveDescriptors:[T,A,F,V,B,H,Q]}),R(1e5),N({toolbarClassName:"mdxeditor-toolbar-full",toolbarContents:()=>t.jsx(W,{options:ue?[]:["source"],children:t.jsx(E,{options:[{when:e=>{var s,a;return"root"!==(null==(s=null==e?void 0:e.rootNode)?void 0:s.getType())&&void 0!==(null==(a=null==e?void 0:e.rootNode)?void 0:a.getType())},contents:()=>t.jsx(l,{children:me("taskForm.validation.textOnlyInComponent")})},{when:e=>{var s,a,t,o;return"root"===(null==(s=null==e?void 0:e.rootNode)?void 0:s.getType())&&void 0!==(null==(a=window.document)?void 0:a.getSelection())&&""!==(null==(o=null==(t=window.document)?void 0:t.getSelection())?void 0:o.toString())},contents:()=>fe(!0)},{fallback:()=>fe(!1)}]})})})]})}),t.jsx(o,{sx:{mt:2,display:{xs:"flex",lg:"none"},justifyContent:"center"},children:t.jsx(x,{variant:"outlined",color:"info",onClick:()=>he(!0),children:me("taskForm.buttons.preview")})})]}),t.jsx(o,{sx:{display:{xs:"none",lg:re?"flex":"none"},flex:"1",height:"100%",width:"auto",minWidth:"350px",maxWidth:"600px",overflow:"auto",p:1,flexDirection:"column",alignItems:"center"},children:"live-preview"===re&&t.jsx(ee,{title:"Demo",text:ne,tagIds:[],tags:[],teacherId:"Demo",onClose:()=>{xe("Sorry, it is a demo")},onFullscreen:()=>he(!0),onValidateAnswers:()=>{},hasQuizzes:!1})})]}),t.jsx(O,{open:ce,onClose:()=>he(!1),task:{id:"preview",title:"Demo",text:ne,tags:[],teacher_id:"Demo"},hasQuizzes:!1,onValidateAnswers:()=>{}})]})};export{ae as default};
